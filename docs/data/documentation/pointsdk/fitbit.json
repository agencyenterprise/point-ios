{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"When you integrate your app with Fitbit, Point Health Service will subscribe to Fitbit to collect the end-user data and generate metrics. However, we must provide a way for the user to authenticate their account and give Point authorization to subscribe to Fitbit data. This article will cover all steps necessary to provide full Fitbit integration to your Point-powered application."}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Integrate your app with Fitbit."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Create a custom URL for your app in Xcode."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Set up the SDK with your Fitbit Client ID."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Call the Fitbit authentication method."}]}]}]},{"anchor":"Fitbit-Integration","level":2,"type":"heading","text":"Fitbit Integration"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The first step to using Fitbit within Point SDK is integrating your app with Fitbit. We have a step-by-step tutorial "},{"type":"reference","isActive":true,"identifier":"https:\/\/point-landing-pages.vercel.app\/docs\/integration-fitbit"},{"type":"text","text":"."}]},{"anchor":"Setting-Up","level":2,"type":"heading","text":"Setting Up"},{"type":"paragraph","inlineContent":[{"type":"text","text":"To instantiate "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/FitbitIntegrationManager"},{"type":"text","text":" within the SDK and make the Fitbit functions available, you must provide your Fitbit Client ID when setting up the SDK."}]},{"type":"codeListing","syntax":"swift","code":["@main","class AppDelegate: UIResponder, UIApplicationDelegate {","    func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {","        Point.setup(","            clientId: \"YOUR_CLIENT_ID\", ","            clientSecret: \"YOUR_CLIENT_SECRET\",","            fitbitClientId: \"YOUR FITBIT CLIENT ID\",","            queryTypes: Set(HealthQueryType.allCases)","            environment: .development","        )","    }","}"]},{"type":"aside","style":"tip","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Your Fitbit Client ID is provided by Fitbit when you create your Fitbit app integration."}]}]},{"type":"aside","style":"important","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"You also must have an user token set to handle your user’s Fitbit authentication. Check "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/GettingStarted"},{"type":"text","text":" for more information."}]}]},{"anchor":"Authentication","level":2,"type":"heading","text":"Authentication"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Each user will need to individually authenticate their Fitbit account within Point SDK and give Point permission to get their Fitbit data. This is done on a Fitbit’s web page, although the SDK is capable of loading a browser session that displays the authentication page. After some simple project setup, all you will need to do is call an SDK method when you wish to trigger the authentication flow."}]},{"anchor":"Create-a-custom-URL","level":3,"type":"heading","text":"Create a custom URL"},{"type":"paragraph","inlineContent":[{"type":"text","text":"As the authentication is handled by a browser session, the browser must know how to handle the control back to your app. For this, we can use a custom URL scheme that, when called by the browser, redirects to your app and dismisses the browser."}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Go to your project settings and select your app target."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Under the "},{"type":"codeVoice","code":"Info"},{"type":"text","text":" tab, look for URL Types and click “+” to add a new one."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"In the Identifier field, enter your app’s Bundle ID."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"In the URL Schemes field, enter the scheme you used in the "},{"type":"codeVoice","code":"callbackURL"},{"type":"text","text":" when creating your app integration with Fitbit. For example, if your "},{"type":"codeVoice","code":"callbackURL"},{"type":"text","text":" is “https:"},{"type":"text","text":"\/\/"},{"type":"text","text":"exampleApp\/auth”, use “exampleApp”."},{"type":"text","text":" "},{"type":"image","identifier":"CustomUrl.png"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"For more information, check the official docs: "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/xcode\/defining-a-custom-url-scheme-for-your-app"}]},{"anchor":"Authenticating","level":3,"type":"heading","text":"Authenticating"},{"type":"paragraph","inlineContent":[{"type":"text","text":"To display the authentication web page, call "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/FitbitIntegrationManager\/authenticate(scopes:callbackURLScheme:)"},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"When you call this function your app will display a browser with the Fitbit authentication web page. If the user successfully authenticates, the browser will be dismissed and the control will be handled back to your app."}]},{"type":"aside","style":"tip","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"callbackUrlScheme"},{"type":"text","text":" parameter is the scheme created in the previous section."}]}]},{"type":"codeListing","syntax":"swift","code":["func authenticate() async {","    do {","        guard let fitbitManager = Point.fitbitManager else {","            print(\"Fitbit client ID was not set when setting up the SDK\")","            return","        }","        try await fitbitManager.authenticate(callbackURLScheme: \"yourapp\")","    } catch {","        print(error)","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you wish to select specific Fitbit scopes, use the "},{"type":"codeVoice","code":"scopes"},{"type":"text","text":" parameter. All scopes are selected by default. Check "},{"type":"reference","isActive":true,"identifier":"https:\/\/dev.fitbit.com\/build\/reference\/web-api\/developer-guide\/application-design\/#Scopes"},{"type":"text","text":" to know more about scopes."}]},{"type":"codeListing","syntax":"swift","code":["func authenticate() async {","    do {","        guard let fitbitManager = Point.fitbitManager else {","            print(\"Fitbit client ID was not set when setting up the SDK\")","            return","        }","        try await fitbitManager.authenticate(scopes: [.sleep, .heartrate], callbackURLScheme: \"yourapp\")","    } catch {","        print(error)","    }","}"]},{"type":"aside","style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The user will be requested to provide authorization for each scope subscription, so data will be collected only if the user provides authorization."}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"After successful authentication, Point will retroactively retrieve one year of Fitbit data. After this, the subscriptions are created and Point will be notified for each new user data. No further action is necessary for the SDK. Check "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/PointAPI"},{"type":"text","text":" to know how to have access to Point’s generated metrics."}]},{"anchor":"Revoke","level":3,"type":"heading","text":"Revoke"},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can revoke all Fitbit subscriptions of the user by calling "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/FitbitIntegrationManager\/revoke()"},{"type":"text","text":"."}]},{"type":"codeListing","syntax":"swift","code":["func revoke() async {","    do {","        try await Point.fitbitManager?.revoke()","    } catch {","        print(error)","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"After calling this, Point Health Service will stop receiving new data from Fitbit."}]}]}],"schemaVersion":{"major":0,"minor":2,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/pointsdk\/fitbit"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/Fitbit","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Use Point SDK to allow your users to integrate their Point and Fitbit accounts."}],"kind":"article","metadata":{"roleHeading":"Article","title":"Fitbit Integration","role":"article","modules":[{"name":"PointSDK"}]},"hierarchy":{"paths":[["doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK"]]},"references":{"doc://co.areyouonpoint.app.PointSDK/documentation/PointSDK/PointAPI":{"role":"collectionGroup","title":"Point Health Data Service","abstract":[{"type":"text","text":"Use the Health Data Service to get user data and generated metric from the Point database."}],"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/PointAPI","kind":"article","type":"topic","url":"\/documentation\/pointsdk\/pointapi"},"CustomUrl.png":{"alt":"Custom URL.","type":"image","identifier":"CustomUrl.png","variants":[{"url":"\/images\/CustomUrl.png","traits":["1x","light"]}]},"https://developer.apple.com/documentation/xcode/defining-a-custom-url-scheme-for-your-app":{"title":"Defining a Custom URL Scheme for Your App","titleInlineContent":[{"type":"text","text":"Defining a Custom URL Scheme for Your App"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/xcode\/defining-a-custom-url-scheme-for-your-app","url":"https:\/\/developer.apple.com\/documentation\/xcode\/defining-a-custom-url-scheme-for-your-app"},"https://point-landing-pages.vercel.app/docs/integration-fitbit":{"title":"here","titleInlineContent":[{"type":"text","text":"here"}],"type":"link","identifier":"https:\/\/point-landing-pages.vercel.app\/docs\/integration-fitbit","url":"https:\/\/point-landing-pages.vercel.app\/docs\/integration-fitbit"},"doc://co.areyouonpoint.app.PointSDK/documentation/PointSDK/GettingStarted":{"role":"article","title":"Getting Started","abstract":[{"type":"text","text":"Learn how to configure you project and start using the SDK"}],"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/GettingStarted","kind":"article","type":"topic","url":"\/documentation\/pointsdk\/gettingstarted"},"doc://co.areyouonpoint.app.PointSDK/documentation/PointSDK/FitbitIntegrationManager/revoke()":{"role":"symbol","title":"revoke()","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"revoke"},{"kind":"text","text":"() "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"}],"abstract":[{"type":"text","text":"Revokes the user’s Fitbit authentication. Effectively, this will cause Point to stop collecting Fitbit data from this user."}],"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/FitbitIntegrationManager\/revoke()","kind":"symbol","type":"topic","url":"\/documentation\/pointsdk\/fitbitintegrationmanager\/revoke()"},"https://dev.fitbit.com/build/reference/web-api/developer-guide/application-design/#Scopes":{"title":"Fitbit Official Documentation","titleInlineContent":[{"type":"text","text":"Fitbit Official Documentation"}],"type":"link","identifier":"https:\/\/dev.fitbit.com\/build\/reference\/web-api\/developer-guide\/application-design\/#Scopes","url":"https:\/\/dev.fitbit.com\/build\/reference\/web-api\/developer-guide\/application-design\/#Scopes"},"doc://co.areyouonpoint.app.PointSDK/documentation/PointSDK/FitbitIntegrationManager/authenticate(scopes:callbackURLScheme:)":{"role":"symbol","title":"authenticate(scopes:callbackURLScheme:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"authenticate"},{"kind":"text","text":"("},{"kind":"externalParam","text":"scopes"},{"kind":"text","text":": ["},{"kind":"typeIdentifier","text":"FitbitScopes","preciseIdentifier":"s:8PointSDK12FitbitScopesO"},{"kind":"text","text":"], "},{"kind":"externalParam","text":"callbackURLScheme"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"}],"abstract":[{"type":"text","text":"Call this function to let the user authenticate his "},{"type":"codeVoice","code":"Fitbit"},{"type":"text","text":" account and integrate it with their "},{"type":"codeVoice","code":"Point"},{"type":"text","text":" account."}],"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/FitbitIntegrationManager\/authenticate(scopes:callbackURLScheme:)","kind":"symbol","type":"topic","url":"\/documentation\/pointsdk\/fitbitintegrationmanager\/authenticate(scopes:callbackurlscheme:)"},"doc://co.areyouonpoint.app.PointSDK/documentation/PointSDK":{"role":"collection","title":"PointSDK","abstract":[{"type":"text","text":"Access comprehensive health and fitness user data collected from across multiple wearable devices."}],"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK","kind":"symbol","type":"topic","url":"\/documentation\/pointsdk"},"doc://co.areyouonpoint.app.PointSDK/documentation/PointSDK/FitbitIntegrationManager":{"role":"symbol","title":"FitbitIntegrationManager","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"FitbitIntegrationManager"}],"abstract":[{"type":"text","text":"Manages the integration with Fitbit"}],"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/FitbitIntegrationManager","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"FitbitIntegrationManager"}],"url":"\/documentation\/pointsdk\/fitbitintegrationmanager"}}}