{"metadata":{"title":"Use Point Health Service","categoryPathComponent":"TutorialTableOfContents","role":"project","category":"PointSDK"},"hierarchy":{"modules":[{"reference":"doc:\/\/co.areyouonpoint.app.PointSDK\/tutorials\/TutorialTableOfContents\/Basic-Steps","projects":[{"reference":"doc:\/\/co.areyouonpoint.app.PointSDK\/tutorials\/PointSDK\/TutorialGettingStarted","sections":[{"kind":"task","reference":"doc:\/\/co.areyouonpoint.app.PointSDK\/tutorials\/PointSDK\/TutorialGettingStarted#Setting-up-your-project"},{"kind":"task","reference":"doc:\/\/co.areyouonpoint.app.PointSDK\/tutorials\/PointSDK\/TutorialGettingStarted#Start-using-the-SDK"}]},{"reference":"doc:\/\/co.areyouonpoint.app.PointSDK\/tutorials\/PointSDK\/TutorialStartDataCollection","sections":[{"kind":"task","reference":"doc:\/\/co.areyouonpoint.app.PointSDK\/tutorials\/PointSDK\/TutorialStartDataCollection#Background-Listeners"},{"kind":"task","reference":"doc:\/\/co.areyouonpoint.app.PointSDK\/tutorials\/PointSDK\/TutorialStartDataCollection#Foreground-Listeners"}]},{"reference":"doc:\/\/co.areyouonpoint.app.PointSDK\/tutorials\/PointSDK\/TutorialHealthService","sections":[{"kind":"task","reference":"doc:\/\/co.areyouonpoint.app.PointSDK\/tutorials\/PointSDK\/TutorialHealthService#Getting-User-Data"},{"kind":"task","reference":"doc:\/\/co.areyouonpoint.app.PointSDK\/tutorials\/PointSDK\/TutorialHealthService#Getting-User-Metrics"}]}]}],"reference":"doc:\/\/co.areyouonpoint.app.PointSDK\/tutorials\/TutorialTableOfContents","paths":[["doc:\/\/co.areyouonpoint.app.PointSDK\/tutorials\/TutorialTableOfContents","doc:\/\/co.areyouonpoint.app.PointSDK\/tutorials\/TutorialTableOfContents\/$volume","doc:\/\/co.areyouonpoint.app.PointSDK\/tutorials\/TutorialTableOfContents\/Basic-Steps"]]},"schemaVersion":{"major":0,"minor":2,"patch":0},"kind":"project","identifier":{"url":"doc:\/\/co.areyouonpoint.app.PointSDK\/tutorials\/PointSDK\/TutorialHealthService","interfaceLanguage":"swift"},"sections":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Your app is now collecting all Health data that we need. Although, this is only raw data. The real power of PointSDK is accessing Point Health Service, which processes the collected raw data to generate personalized metrics and insights."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Learn now how to access "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/PointAPI"},{"type":"text","text":" using "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/HealthDataService"}]}],"estimatedTimeInMinutes":20,"title":"Use Point Health Service","image":"","chapter":"Basic Steps","kind":"hero","backgroundImage":""},{"kind":"tasks","tasks":[{"anchor":"Getting-User-Data","title":"Getting User Data","contentSection":[{"kind":"contentAndMedia","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Our first step is getting the basic user info. We will get their email and last completed workout. There is plenty more to get from it, so after finishing this section remember to check out the official documentation."}]}],"mediaPosition":"trailing"}],"stepsSection":[{"code":"TutorialCodeViewController6.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"First, choose a way to display the user info. We will use two UIKit labels for that, but feel free to just print if you wish."}]}],"caption":[],"type":"step","runtimePreview":"AppFirstView.png","media":null},{"code":"TutorialCodeViewController7.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Now, create an "},{"type":"codeVoice","code":"async"},{"type":"text","text":" function calling "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/HealthDataService\/getUserData()"},{"type":"text","text":", which triggers a network request to Point’s Database."}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"This will provide you an "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/User"},{"type":"text","text":", a Struct that contains basic information about your user, like his identification. You will find his goals and last workouts, if there is any."}]}],"type":"step","runtimePreview":null,"media":null},{"code":"TutorialCodeViewController8.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"With the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/User"},{"type":"text","text":", we can just access its "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/User\/email"},{"type":"text","text":" and "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/User\/lastWorkout"},{"type":"text","text":". Lets also get the  "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/Workout"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/Workout\/activityName"},{"type":"text","text":" to display."}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/User\/lastWorkout"},{"type":"text","text":" attribute will only be available if you have recorded at least one workout. Note that this information is stored in Point’s Database, so it’s not binded to your device. If you switch to a different device with no Health data recorded and log in to this same Point account, you will still see your last workout recorded in the previous Device."}]}],"type":"step","runtimePreview":null,"media":null},{"code":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Run your app again, when the request is complete you should see the requested user data."}]}],"caption":[],"type":"step","runtimePreview":null,"media":"AppScreen1.png"}]},{"anchor":"Getting-User-Metrics","title":"Getting User Metrics","contentSection":[{"kind":"contentAndMedia","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"You have now learned how to get data from Point’s server using "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/HealthDataService"},{"type":"text","text":". Although, we haven’t got any new data generated by Point Health Service."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"On this section we will learn how to get "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/HealthMetric"},{"type":"text","text":", different kinds of metrics generated by Point by processing the Health data we collect."}]}],"mediaPosition":"trailing"}],"stepsSection":[{"code":"TutorialCodeViewController9.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"First, lets add new labels to our View Controller so we can show our new data."}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Feel free to ignore or do this step in another way if you wish."}]}],"type":"step","runtimePreview":null,"media":null},{"code":"TutorialCodeViewController10.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Now, create a new async function and call "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/HealthDataService\/getHealthMetrics(filter:workoutId:date:)"},{"type":"text","text":". Run your app."}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"On this step, lets just print the results. If the request is sucessful you will see all Health Metrics generated by Point. Each metric has a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/HealthMetric\/HealthMetricType"},{"type":"text","text":", Value and Variance. Note that your response array won’t have a metric for each "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/HealthMetric\/HealthMetricType"},{"type":"text","text":". That’s because each metric kind has different minimum raw data requirements to be generated. If your array is empty, try adding more data to Health and wait for some time, than run your app again."}]}],"type":"step","runtimePreview":null,"media":null},{"code":"TutorialCodeViewController11.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Lets change the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/HealthDataService\/getHealthMetrics(filter:workoutId:date:)"},{"type":"text","text":" call to filter for a specific "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/HealthMetric\/HealthMetricType"},{"type":"text","text":". Also, update your function to display the results"}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Using the filter is a good way of only getting the metric type you wish. Note that you can also filter for a specific workout session and a date."}]}],"type":"step","runtimePreview":null,"media":null},{"code":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Run your app. Now you should see your average resting heart rate."}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"This concludes our basic steps tutorial! With this basic app, you are able to fully use PointSDK. Take some time to dive in the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/HealthDataService"},{"type":"text","text":" documentation to know all provided features and feel free to edit this app for practicing purposes."}]}],"type":"step","runtimePreview":null,"media":"UserHealthMetrics.png"}]}]}],"references":{"TutorialCodeViewController8.swift":{"syntax":"swift","content":["import UIKit","import PointSDK","","class ViewController: UIViewController {","    @IBOutlet weak var userLabel: UILabel!","    @IBOutlet weak var workoutLabel: UILabel!","","    override func viewDidLoad() {","        super.viewDidLoad()","    }","","    override func viewDidAppear(_ animated: Bool) {","        Task {","            do {","                try await Point.healthKit?.requestAuthorizationsIfPossible()","            } catch {","                print(\"Error requesting authorizations: \\(error)\")","            }","","            do {","                try await Point.setUserToken(accessToken: self.getUserToken())","            } catch {","                print(\"Error setting the user token or fetching user past data: \\(error)\")","            }","","            do {","                let _ = try await Point.healthKit?.enableAllBackgroundDelivery()","            } catch {","                print(\"Error enabling background deliveries: \\(error)\")","            }","","            do {","                let _ = try await Point.healthKit?.enableAllForegroundListeners()","            } catch {","                print(\"Error enabling foreground listeners: \\(error)\")","            }","            ","            await getUserData()","        }","    }","    ","    @MainActor func getUserData() async {","        do {","            guard let userData = try await Point.healthDataService.getUserData() else {","                print(\"No user data.\")","                return","            }","            userLabel.text = \"User email is: \\(userData.email ?? \"Not provided\")\"","","            guard let lastWorkout = userData.lastWorkout?.activityName else {","                print(\"No workouts available yet\")","                return","            }","            workoutLabel.text = \"User's last workout was: \\(lastWorkout)\"","            ","        } catch {","            print(\"Error getting user data: \\(error)\")","        }","    }","}","","extension ViewController {","    func getUserToken() -> String {","        return \"ReplaceThisWithYourToken\"","    }","}"],"fileName":"ViewController.swift","identifier":"TutorialCodeViewController8.swift","type":"file","fileType":"swift","highlights":[{"line":42},{"line":48},{"line":49},{"line":50},{"line":51},{"line":52},{"line":53},{"line":54},{"line":55}]},"doc://co.areyouonpoint.app.PointSDK/documentation/PointSDK/HealthDataService":{"role":"symbol","title":"HealthDataService","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"HealthDataService"}],"abstract":[{"type":"text","text":"Manages the integration with the Point API."}],"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/HealthDataService","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"HealthDataService"}],"url":"\/documentation\/pointsdk\/healthdataservice"},"doc://co.areyouonpoint.app.PointSDK/documentation/PointSDK/HealthDataService/getUserData()":{"role":"symbol","title":"getUserData()","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"getUserData"},{"kind":"text","text":"() "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"User","preciseIdentifier":"s:8PointSDK4UserV"},{"kind":"text","text":"?"}],"abstract":[{"type":"text","text":"Get the logged "},{"type":"codeVoice","code":"User"},{"type":"text","text":" data from the "},{"type":"codeVoice","code":"Point"},{"type":"text","text":" database."}],"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/HealthDataService\/getUserData()","kind":"symbol","required":true,"type":"topic","url":"\/documentation\/pointsdk\/healthdataservice\/getuserdata()"},"doc://co.areyouonpoint.app.PointSDK/tutorials/TutorialTableOfContents/Basic-Steps":{"role":"article","title":"Basic Steps","abstract":[],"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/tutorials\/TutorialTableOfContents\/Basic-Steps","kind":"article","type":"topic","url":"\/tutorials\/tutorialtableofcontents\/basic-steps"},"doc://co.areyouonpoint.app.PointSDK/documentation/PointSDK/HealthMetric/HealthMetricType":{"role":"symbol","title":"HealthMetric.HealthMetricType","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"HealthMetricType"}],"abstract":[{"type":"text","text":"Available health metric types and their descriptions"}],"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/HealthMetric\/HealthMetricType","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"HealthMetricType"}],"url":"\/documentation\/pointsdk\/healthmetric\/healthmetrictype"},"doc://co.areyouonpoint.app.PointSDK/tutorials/TutorialTableOfContents":{"role":"overview","title":"Point SDK Tutorial","abstract":[{"type":"text","text":"Learn how to use PointSDK."}],"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/tutorials\/TutorialTableOfContents","kind":"overview","type":"topic","url":"\/tutorials\/tutorialtableofcontents"},"doc://co.areyouonpoint.app.PointSDK/documentation/PointSDK/User/email":{"role":"symbol","title":"email","fragments":[{"kind":"keyword","text":"let"},{"kind":"text","text":" "},{"kind":"identifier","text":"email"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":"?"}],"abstract":[],"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/User\/email","kind":"symbol","type":"topic","url":"\/documentation\/pointsdk\/user\/email"},"AppScreen1.png":{"alt":"A print screen of the app, with the following labels: 'User email is: user@point' and 'User's last workout was: Running'","type":"image","identifier":"AppScreen1.png","variants":[{"url":"\/images\/AppScreen1.png","traits":["1x","light"]}]},"doc://co.areyouonpoint.app.PointSDK/tutorials/PointSDK/TutorialGettingStarted#Start-using-the-SDK":{"role":"pseudoSymbol","title":"Start using the SDK","abstract":[{"type":"text","text":"Learn the first steps to start using Point SDK."}],"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/tutorials\/PointSDK\/TutorialGettingStarted#Start-using-the-SDK","kind":"section","type":"section","url":"\/tutorials\/pointsdk\/tutorialgettingstarted#Start-using-the-SDK"},"doc://co.areyouonpoint.app.PointSDK/documentation/PointSDK/User/lastWorkout":{"role":"symbol","title":"lastWorkout","fragments":[{"kind":"keyword","text":"let"},{"kind":"text","text":" "},{"kind":"identifier","text":"lastWorkout"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Workout","preciseIdentifier":"s:8PointSDK7WorkoutV"},{"kind":"text","text":"?"}],"abstract":[],"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/User\/lastWorkout","kind":"symbol","type":"topic","url":"\/documentation\/pointsdk\/user\/lastworkout"},"doc://co.areyouonpoint.app.PointSDK/documentation/PointSDK/HealthMetric":{"role":"symbol","title":"HealthMetric","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"HealthMetric"}],"abstract":[{"type":"text","text":"Represents a summary of the collected samples."}],"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/HealthMetric","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"HealthMetric"}],"url":"\/documentation\/pointsdk\/healthmetric"},"doc://co.areyouonpoint.app.PointSDK/tutorials/PointSDK/TutorialGettingStarted":{"role":"project","title":"Getting Started","estimatedTime":"20min","abstract":[{"type":"text","text":"Learn the first steps to start using Point SDK."}],"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/tutorials\/PointSDK\/TutorialGettingStarted","kind":"project","type":"topic","url":"\/tutorials\/pointsdk\/tutorialgettingstarted"},"doc://co.areyouonpoint.app.PointSDK/tutorials/PointSDK/TutorialStartDataCollection":{"role":"project","title":"Start Collecting Data","estimatedTime":"20min","abstract":[{"type":"text","text":"Now that you have set up the SDK, authenticated your user, and already got the user past data in the device, it’s time to enable the data listeners to keep Point’s Health Service up to date with new samples."}],"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/tutorials\/PointSDK\/TutorialStartDataCollection","kind":"project","type":"topic","url":"\/tutorials\/pointsdk\/tutorialstartdatacollection"},"doc://co.areyouonpoint.app.PointSDK/documentation/PointSDK/Workout/activityName":{"role":"symbol","title":"activityName","fragments":[{"kind":"keyword","text":"let"},{"kind":"text","text":" "},{"kind":"identifier","text":"activityName"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"}],"abstract":[],"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/Workout\/activityName","kind":"symbol","type":"topic","url":"\/documentation\/pointsdk\/workout\/activityname"},"doc://co.areyouonpoint.app.PointSDK/documentation/PointSDK/PointAPI":{"role":"collectionGroup","title":"Point Health Data Service","abstract":[{"type":"text","text":"Use the Health Data Service to get user data and generated metric from the Point database."}],"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/PointAPI","kind":"article","type":"topic","url":"\/documentation\/pointsdk\/pointapi"},"TutorialCodeViewController10.swift":{"syntax":"swift","content":["import UIKit","import PointSDK","","class ViewController: UIViewController {","    @IBOutlet weak var userLabel: UILabel!","    @IBOutlet weak var workoutLabel: UILabel!","    @IBOutlet weak var metricLabel: UILabel!","    @IBOutlet weak var metricValueLabel: UILabel!","    @IBOutlet weak var metricVarianceLabel: UILabel!","","    override func viewDidLoad() {","        super.viewDidLoad()","    }","","    override func viewDidAppear(_ animated: Bool) {","        Task {","            do {","                try await Point.healthKit?.requestAuthorizationsIfPossible()","            } catch {","                print(\"Error requesting authorizations: \\(error)\")","            }","","            do {","                try await Point.setUserToken(accessToken: self.getUserToken())","            } catch {","                print(\"Error setting the user token or fetching user past data: \\(error)\")","            }","","            do {","                let _ = try await Point.healthKit?.enableAllBackgroundDelivery()","            } catch {","                print(\"Error enabling background deliveries: \\(error)\")","            }","","            do {","                let _ = try await Point.healthKit?.enableAllForegroundListeners()","            } catch {","                print(\"Error enabling foreground listeners: \\(error)\")","            }","            ","            await getUserData()","","            await getHeathMetrics()","        }","    }","    ","    @MainActor func getUserData() async {","        do {","            guard let userData = try await Point.healthService.getUserData() else {","                print(\"No user data.\")","                return","            }","            userLabel.text = \"User email is: \\(userData.email ?? \"Not provided\")\"","","            guard let lastWorkout = userData.lastWorkout?.activityName else {","                print(\"No workouts available yet\")","                return","            }","            workoutLabel.text = \"User's last workout was: \\(lastWorkout)\"","            ","        } catch {","            print(\"Error getting user data: \\(error)\")","        }","    }","","    func getHeathMetrics() async {","        do {","            let metrics = try await Point.healthDataService.getHealthMetrics(","                filter: [HealthMetric.Kind.allCases],","                workoutId: nil,","                date: nil","            )","            print(metrics)","        } catch {","            print(\"Error getting health metrics: \\(error)\")","        }","    }","}","","extension ViewController {","    func getUserToken() -> String {","        return \"ReplaceThisWithYourToken\"","    }","}"],"fileName":"ViewController.swift","identifier":"TutorialCodeViewController10.swift","type":"file","fileType":"swift","highlights":[{"line":42},{"line":43},{"line":49},{"line":65},{"line":66},{"line":67},{"line":68},{"line":69},{"line":70},{"line":71},{"line":72},{"line":73},{"line":74},{"line":75},{"line":76},{"line":77}]},"doc://co.areyouonpoint.app.PointSDK/documentation/PointSDK/Workout":{"role":"symbol","title":"Workout","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Workout"}],"abstract":[],"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/Workout","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Workout"}],"url":"\/documentation\/pointsdk\/workout"},"UserHealthMetrics.png":{"alt":"A screenshot of the apple. It now contains three new labels, which reads 'Metric type: RestingHR', 'Value: 93' and 'Variance: 29'","type":"image","identifier":"UserHealthMetrics.png","variants":[{"url":"\/images\/UserHealthMetrics.png","traits":["1x","light"]}]},"doc://co.areyouonpoint.app.PointSDK/tutorials/PointSDK/TutorialStartDataCollection#Background-Listeners":{"role":"pseudoSymbol","title":"Background Listeners","abstract":[{"type":"text","text":"Now that you have set up the SDK, authenticated your user, and already got the user past data in the device, it’s time to enable the data listeners to keep Point’s Health Service up to date with new samples."}],"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/tutorials\/PointSDK\/TutorialStartDataCollection#Background-Listeners","kind":"section","type":"section","url":"\/tutorials\/pointsdk\/tutorialstartdatacollection#Background-Listeners"},"TutorialCodeViewController11.swift":{"syntax":"swift","content":["import UIKit","import PointSDK","","class ViewController: UIViewController {","    @IBOutlet weak var userLabel: UILabel!","    @IBOutlet weak var workoutLabel: UILabel!","    @IBOutlet weak var metricLabel: UILabel!","    @IBOutlet weak var metricValueLabel: UILabel!","    @IBOutlet weak var metricVarianceLabel: UILabel!","","    override func viewDidLoad() {","        super.viewDidLoad()","    }","","    override func viewDidAppear(_ animated: Bool) {","        Task {","            do {","                try await Point.healthKit?.requestAuthorizationsIfPossible()","            } catch {","                print(\"Error requesting authorizations: \\(error)\")","            }","","            do {","                try await Point.setUserToken(accessToken: self.getUserToken())","            } catch {","                print(\"Error setting the user token or fetching user past data: \\(error)\")","            }","","            do {","                let _ = try await Point.healthKit?.enableAllBackgroundDelivery()","            } catch {","                print(\"Error enabling background deliveries: \\(error)\")","            }","","            do {","                let _ = try await Point.healthKit?.enableAllForegroundListeners()","            } catch {","                print(\"Error enabling foreground listeners: \\(error)\")","            }","            ","            await getUserData()","","            await getHeathMetrics()","        }","    }","    ","    @MainActor func getUserData() async {","        do {","            guard let userData = try await Point.healthService.getUserData() else {","                print(\"No user data.\")","                return","            }","            userLabel.text = \"User email is: \\(userData.email ?? \"Not provided\")\"","","            guard let lastWorkout = userData.lastWorkout?.activityName else {","                print(\"No workouts available yet\")","                return","            }","            workoutLabel.text = \"User's last workout was: \\(lastWorkout)\"","            ","        } catch {","            print(\"Error getting user data: \\(error)\")","        }","    }","","    @MainActor func getHeathMetrics() async {","        do {","            let metrics = try await Point.healthDataService.getHealthMetrics(","                filter: [HealthMetric.Kind.restingHr],","                workoutId: nil,","                date: nil","            )","            ","            guard let metric = metrics.first else {","                print(\"No health metrics.\")","                return","            }","            metricLabel.text = \"Metric type: \\(metric.type)\"","            metricValueLabel.text = \"Value: \\(metric.value)\"","            metricVarianceLabel.text = \"Variance: \\(metric.variance ?? 0)\"","        } catch {","            print(\"Error getting health metrics: \\(error)\")","        }","    }","}","","extension ViewController {","    func getUserToken() -> String {","        return \"ReplaceThisWithYourToken\"","    }","}"],"fileName":"ViewController.swift","identifier":"TutorialCodeViewController11.swift","type":"file","fileType":"swift","highlights":[{"line":66},{"line":69},{"line":73},{"line":74},{"line":75},{"line":76},{"line":77},{"line":78},{"line":79},{"line":80}]},"TutorialCodeViewController6.swift":{"syntax":"swift","content":["import UIKit","import PointSDK","","class ViewController: UIViewController {","    @IBOutlet weak var userLabel: UILabel!","    @IBOutlet weak var workoutLabel: UILabel!","","    override func viewDidLoad() {","        super.viewDidLoad()","    }","","    override func viewDidAppear(_ animated: Bool) {","        Task {","            do {","                try await Point.healthKit?.requestAuthorizationsIfPossible()","            } catch {","                print(\"Error requesting authorizations: \\(error)\")","            }","","            do {","                try await Point.setUserToken(accessToken: self.getUserToken())","            } catch {","                print(\"Error setting the user token or fetching user past data: \\(error)\")","            }","","            do {","                let _ = try await Point.healthKit?.enableAllBackgroundDelivery()","            } catch {","                print(\"Error enabling background deliveries: \\(error)\")","            }","","            do {","                let _ = try await Point.healthKit?.enableAllForegroundListeners()","            } catch {","                print(\"Error enabling foreground listeners: \\(error)\")","            }","        }","    }","}","","extension ViewController {","    func getUserToken() -> String {","        return \"ReplaceThisWithYourToken\"","    }","}"],"fileName":"ViewController.swift","identifier":"TutorialCodeViewController6.swift","type":"file","fileType":"swift","highlights":[{"line":5},{"line":6},{"line":7}]},"doc://co.areyouonpoint.app.PointSDK/tutorials/PointSDK/TutorialStartDataCollection#Foreground-Listeners":{"role":"pseudoSymbol","title":"Foreground Listeners","abstract":[{"type":"text","text":"Now that you have set up the SDK, authenticated your user, and already got the user past data in the device, it’s time to enable the data listeners to keep Point’s Health Service up to date with new samples."}],"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/tutorials\/PointSDK\/TutorialStartDataCollection#Foreground-Listeners","kind":"section","type":"section","url":"\/tutorials\/pointsdk\/tutorialstartdatacollection#Foreground-Listeners"},"TutorialCodeViewController9.swift":{"syntax":"swift","content":["import UIKit","import PointSDK","","class ViewController: UIViewController {","    @IBOutlet weak var userLabel: UILabel!","    @IBOutlet weak var workoutLabel: UILabel!","    @IBOutlet weak var metricLabel: UILabel!","    @IBOutlet weak var metricValueLabel: UILabel!","    @IBOutlet weak var metricVarianceLabel: UILabel!","","    override func viewDidLoad() {","        super.viewDidLoad()","    }","","    override func viewDidAppear(_ animated: Bool) {","        Task {","            do {","                try await Point.healthKit?.requestAuthorizationsIfPossible()","            } catch {","                print(\"Error requesting authorizations: \\(error)\")","            }","","            do {","                try await Point.setUserToken(accessToken: self.getUserToken())","            } catch {","                print(\"Error setting the user token or fetching user past data: \\(error)\")","            }","","            do {","                let _ = try await Point.healthKit?.enableAllBackgroundDelivery()","            } catch {","                print(\"Error enabling background deliveries: \\(error)\")","            }","","            do {","                let _ = try await Point.healthKit?.enableAllForegroundListeners()","            } catch {","                print(\"Error enabling foreground listeners: \\(error)\")","            }","            ","            await getUserData()","        }","    }","    ","    @MainActor func getUserData() async {","        do {","            guard let userData = try await Point.healthDataService.getUserData() else {","                print(\"No user data.\")","                return","            }","            userLabel.text = \"User email is: \\(userData.email ?? \"Not provided\")\"","","            guard let lastWorkout = userData.lastWorkout?.activityName else {","                print(\"No workouts available yet\")","                return","            }","            workoutLabel.text = \"User's last workout was: \\(lastWorkout)\"","            ","        } catch {","            print(\"Error getting user data: \\(error)\")","        }","    }","}","","extension ViewController {","    func getUserToken() -> String {","        return \"ReplaceThisWithYourToken\"","    }","}"],"fileName":"ViewController.swift","identifier":"TutorialCodeViewController9.swift","type":"file","fileType":"swift","highlights":[{"line":7},{"line":8},{"line":9}]},"doc://co.areyouonpoint.app.PointSDK/tutorials/PointSDK/TutorialHealthService#Getting-User-Data":{"role":"pseudoSymbol","title":"Getting User Data","abstract":[{"type":"text","text":"Your app is now collecting all Health data that we need. Although, this is only raw data. The real power of PointSDK is accessing Point Health Service, which processes the collected raw data to generate personalized metrics and insights."}],"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/tutorials\/PointSDK\/TutorialHealthService#Getting-User-Data","kind":"section","type":"section","url":"\/tutorials\/pointsdk\/tutorialhealthservice#Getting-User-Data"},"AppFirstView.png":{"alt":"A image showing the storyboard with two new labels: 'User:' and 'Workout:'","type":"image","identifier":"AppFirstView.png","variants":[{"url":"\/images\/AppFirstView.png","traits":["1x","light"]}]},"doc://co.areyouonpoint.app.PointSDK/documentation/PointSDK/HealthDataService/getHealthMetrics(filter:workoutId:date:)":{"role":"symbol","title":"getHealthMetrics(filter:workoutId:date:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"getHealthMetrics"},{"kind":"text","text":"("},{"kind":"externalParam","text":"filter"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Set","preciseIdentifier":"s:Sh"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"HealthMetric","preciseIdentifier":"s:8PointSDK12HealthMetricV"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"HealthMetricType","preciseIdentifier":"s:8PointSDK12HealthMetricV0cD4TypeO"},{"kind":"text","text":">, "},{"kind":"externalParam","text":"workoutId"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Int","preciseIdentifier":"s:Si"},{"kind":"text","text":"?, "},{"kind":"externalParam","text":"date"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Date","preciseIdentifier":"s:10Foundation4DateV"},{"kind":"text","text":"?) "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> ["},{"kind":"typeIdentifier","text":"HealthMetric","preciseIdentifier":"s:8PointSDK12HealthMetricV"},{"kind":"text","text":"]"}],"abstract":[{"type":"text","text":"Gets a list of "},{"type":"codeVoice","code":"HealthMetrics"},{"type":"text","text":" from the authenticated user."}],"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/HealthDataService\/getHealthMetrics(filter:workoutId:date:)","kind":"symbol","required":true,"type":"topic","url":"\/documentation\/pointsdk\/healthdataservice\/gethealthmetrics(filter:workoutid:date:)"},"doc://co.areyouonpoint.app.PointSDK/documentation/PointSDK/User":{"role":"symbol","title":"User","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"User"}],"abstract":[],"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/documentation\/PointSDK\/User","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"User"}],"url":"\/documentation\/pointsdk\/user"},"doc://co.areyouonpoint.app.PointSDK/tutorials/PointSDK/TutorialHealthService":{"role":"project","title":"Use Point Health Service","estimatedTime":"20min","abstract":[{"type":"text","text":"Your app is now collecting all Health data that we need. Although, this is only raw data. The real power of PointSDK is accessing Point Health Service, which processes the collected raw data to generate personalized metrics and insights."}],"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/tutorials\/PointSDK\/TutorialHealthService","kind":"project","type":"topic","url":"\/tutorials\/pointsdk\/tutorialhealthservice"},"TutorialCodeViewController7.swift":{"syntax":"swift","content":["import UIKit","import PointSDK","","class ViewController: UIViewController {","    @IBOutlet weak var userLabel: UILabel!","    @IBOutlet weak var workoutLabel: UILabel!","","    override func viewDidLoad() {","        super.viewDidLoad()","    }","","    override func viewDidAppear(_ animated: Bool) {","        Task {","            do {","                try await Point.healthKit?.requestAuthorizationsIfPossible()","            } catch {","                print(\"Error requesting authorizations: \\(error)\")","            }","","            do {","                try await Point.setUserToken(accessToken: self.getUserToken())","            } catch {","                print(\"Error setting the user token or fetching user past data: \\(error)\")","            }","","            do {","                let _ = try await Point.healthKit?.enableAllBackgroundDelivery()","            } catch {","                print(\"Error enabling background deliveries: \\(error)\")","            }","","            do {","                let _ = try await Point.healthKit?.enableAllForegroundListeners()","            } catch {","                print(\"Error enabling foreground listeners: \\(error)\")","            }","            ","            await getUserData()","        }","    }","    ","    func getUserData() async {","        do {","            guard let userData = try await Point.healthDataService.getUserData() else {","                print(\"No user data.\")","                return","            }","        } catch {","            print(\"Error getting user data: \\(error)\")","        }","    }","}","","extension ViewController {","    func getUserToken() -> String {","        return \"ReplaceThisWithYourToken\"","    }","}"],"fileName":"ViewController.swift","identifier":"TutorialCodeViewController7.swift","type":"file","fileType":"swift","highlights":[{"line":37},{"line":38},{"line":41},{"line":42},{"line":43},{"line":44},{"line":45},{"line":46},{"line":47},{"line":48},{"line":49},{"line":50},{"line":51}]},"doc://co.areyouonpoint.app.PointSDK/tutorials/PointSDK/TutorialGettingStarted#Setting-up-your-project":{"role":"pseudoSymbol","title":"Setting up your project","abstract":[{"type":"text","text":"Learn the first steps to start using Point SDK."}],"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/tutorials\/PointSDK\/TutorialGettingStarted#Setting-up-your-project","kind":"section","type":"section","url":"\/tutorials\/pointsdk\/tutorialgettingstarted#Setting-up-your-project"},"doc://co.areyouonpoint.app.PointSDK/tutorials/PointSDK/TutorialHealthService#Getting-User-Metrics":{"role":"pseudoSymbol","title":"Getting User Metrics","abstract":[{"type":"text","text":"Your app is now collecting all Health data that we need. Although, this is only raw data. The real power of PointSDK is accessing Point Health Service, which processes the collected raw data to generate personalized metrics and insights."}],"identifier":"doc:\/\/co.areyouonpoint.app.PointSDK\/tutorials\/PointSDK\/TutorialHealthService#Getting-User-Metrics","kind":"section","type":"section","url":"\/tutorials\/pointsdk\/tutorialhealthservice#Getting-User-Metrics"}}}